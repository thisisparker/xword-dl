name: Status check on supported outlets

on:
  pull_request:
    branches: [ main ]

jobs:
  install-and-test-outlets:
    name: Install xword-dl and check that existing outlets work

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@b4ffde65f46336ab88eb53be808477a3936bae11
      - name: Set up Python
        uses: actions/setup-python
        with:
          python-version: '3.x'
      - name: Install xword-dl
        run: |
          python -m pip install --upgrade pip
          python -m pip install .
      - name: Test Atlantic latest
        run: xword-dl atl
      - name: Test Atlantic by date
        run: xword-dl atl -d 12/15/23
      - name: Test Crossword Club latest
        run: xword-dl club
      - name: Test Crossword Club by date
        run: xword-dl club -d 1/3/23
      - name: Test Crossword Club by URL
        run: xword-dl "https://crosswordclub.com/puzzles/sunday-january-07-2024/"
      - name: Test Daily Beast latest
        run: xword-dl db
      - name: Test Der Standard latest
        run: xword-dl std
      - name: Test Der Standard by URL
        run: xword-dl "https://www.derstandard.at/story/3000000201583/kreuzwortraetsel-h-10580"
      - name: Test Globe and Mail
        run: xword-dl tgam
      - name: Test Globe and Mail by URL
        run: xword-dl "https://www.theglobeandmail.com/puzzles-and-crosswords/cryptic-crossword/?date=060124&T=0"
